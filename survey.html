<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Startup Survey</title>
  <link rel="stylesheet" href="surveystyle.css"/>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  
<script type="module">
    import { supabase } from "./supabaseClient.js";
</script>
</head>
<body>
  <div id="app"></div>
  
  <h1 id="welcomeTitle" style.display="none">Tell us a little about yourself!</h1>

  <!-- Step 1 – Profile Info -->
  <div class="question active" id="q1">
    <label class="bigLabel">Profile Information</label>

    <label class="smallLabel">Name:</label>
    <div class="dob-container">
      <input type="text" id="profileName" placeholder="Your name">
    </div>

    <label class="smallLabel">Diet preference:</label>
    <select id="diet" name="diet" class="diet-select">
      <option value="" disabled selected>Select your diet</option>
      <option value="Vegan">Vegan</option>
      <option value="In transition">In transition</option>
      <option value="Vegetarian">Vegetarian</option>
      <option value="Pescatarian">Pescatarian</option>
      <option value="Flexitarian">Flexitarian</option>
      <option value="Omnivore">Omnivore</option>
    </select>

    <label for="profilePhoto" class="file-btn">Upload Profile Photo</label>
    <input type="file" id="profilePhoto" accept="image/*" />
    <small>If you skip this, we'll use a default picture.</small>
    <img id="profilePreview" alt="Profile preview" />
  </div>


  <!-- Step 2 – Goals + Health Issues -->
  <div class="question" id="q2">
    <label class="bigLabel">What are your goals?</label>
    <small>Knowing your goals helps us suggest tips and challenges that fit your lifestyle.</small>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="goal" value="Protecting animals & animal welfare">
      Protecting animals & animal welfare
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="goal" value="Caring for the environment & fighting climate change">
      Caring for the environment & fighting climate change
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="goal" value="Healthy living & wellness">
      Healthy living & wellness
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="goal" value="Solving health issues">
      Solving health issues
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="goal" value="Boosting my performance as an athlete">
      Boosting my performance as an athlete
    </label>
  </div>

  <div class="question" id="q2b">
    <label class="bigLabel">Are you experiencing any of these health concerns?</label>
    <small>This helps us offer tips and recipes that support your health in a gentle, personalized way.</small>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Low energy or fatigue">
      Low energy or fatigue
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Nutrition imbalances">
      Nutrition imbalances
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="High cholesterol or heart issues">
      High cholesterol or heart issues
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Diabetes or blood sugar issues">
      Diabetes or blood sugar issues
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Muscle or joint discomfort">
      Muscle or joint discomfort
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Digestive issues">
      Digestive issues
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Inflammation or swelling">
      Inflammation or swelling
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Kidney stress">
      Kidney stress
    </label>
    <label class="checkbox-label">
      <input type="checkbox" class="checkbox" name="healthIssue" value="Cancer risk">
      Concerned about cancer risk
    </label>
  </div>

  <!-- Step 3 – Pet -->
  <div class="question" id="q3">
    <label class="bigLabel">Pick a pet!</label>
    <label class="smallLabel">Name your pet:</label>
    <input type="text" id="petname" placeholder="Pet's name">

    <label for="petPhotoUpload" class="file-btn">Upload a pet photo</label>
    <input type="file" id="petPhotoUpload" accept="image/*" />
    <small>If you skip this, we'll use a default pet.</small>

    <img id="petPhotoPreview" alt="Pet preview" />
  </div>

  <!-- Step 4 – Buddy Intro -->
  <div class="question" id="q4">
    <div id="buddyIntro" class="hidden">
      <h3>Meet your Vegan Buddies!</h3>
      <div class="buddy-container">
        <div class="buddy">
          <img src="characters/eluna.png" alt="Eluna" class="portrait" id="elunaPortrait">
          <div class="typing-text" id="elunaText"></div>
        </div>
        <div class="buddy">
          <img src="characters/elune.png" alt="Elune" class="portrait" id="elunePortrait">
          <div class="typing-text" id="eluneText"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="button-container">
    <button id="nextBtn">Next</button>
    <button id="startButton" class="hidden">Let's Start!</button>
  </div>

  <script src="surveyscript.js"></script>
</body>
</html>
